<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org">
<meta name='Author' content='ActiveState'>
<link rel='stylesheet' type='text/css' href='../../aspn.css'>
<title>Tcl Built-In Commands - zlib manual page</title>
<link rel="stylesheet" href="../docs.css" type="text/css" media=
"all">
</head>
<body>
<div class="banner">
<table width="100%" border="0" cellspacing="0" cellpadding="3">
<tr>
<td align="left"><a target="_blank" href=
"http://www.activestate.com/activetcl"><img src=
"../../images/ActiveTcl.gif" border="0" align="left" alt=
"ActiveTcl"></a> </td>
<td align="center" class="heading">ActiveTcl User Guide</td>
<td align="right"><a target="_blank" href=
"http://www.activestate.com"><img src="../../images/AS_logo.gif"
border="0" align="right" alt="ActiveState Software Inc."></a> </td>
</tr>
</table>
</div>

<br>
<h2><a href="../contents.htm">Tcl/Tk Documentation</a>
<small>&gt;</small> <a href="contents.htm">TclCmd</a>
<small>&gt;</small> zlib</h2>

<h3><a href="../UserCmd/contents.htm">Tcl/Tk Applications</a> | <a
href="../TclCmd/contents.htm">Tcl Commands</a> | <a href=
"../TkCmd/contents.htm">Tk Commands</a> | <a href=
"../TclLib/contents.htm">Tcl Library</a> | <a href=
"../TkLib/contents.htm">Tk Library</a></h3>

<dl>
<dd><a href="zlib.htm#M2" name="L2196">NAME</a> 

<dl>
<dd>zlib - compression and decompression operations</dd>
</dl>
</dd>

<dd><a href="zlib.htm#M3" name="L2197">SYNOPSIS</a> 

<dl>
<dd><b>zlib</b> <i>subcommand arg ...</i></dd>
</dl>
</dd>

<dd><a href="zlib.htm#M4" name="L2198">DESCRIPTION</a></dd>

<dd><a href="zlib.htm#M5" name="L2199">COMPRESSION SUBCOMMANDS</a> 

<dl class="compression subcommands">
<dd><a href="zlib.htm#M6" name="L2200"><b>zlib compress</b>
<i>string</i> ?<i>level</i>?</a></dd>

<dd><a href="zlib.htm#M7" name="L2201"><b>zlib decompress</b>
<i>string</i> ?<i>bufferSize</i>?</a></dd>

<dd><a href="zlib.htm#M8" name="L2202"><b>zlib deflate</b>
<i>string</i> ?<i>level</i>?</a></dd>

<dd><a href="zlib.htm#M9" name="L2203"><b>zlib gunzip</b>
<i>string</i> ?<b>-headerVar</b> <i>varName</i>?</a> 

<dl class="compression subcommands">
<dd><a href="zlib.htm#M10" name="L2204"><b>comment</b></a></dd>

<dd><a href="zlib.htm#M11" name="L2205"><b>crc</b></a></dd>

<dd><a href="zlib.htm#M12" name="L2206"><b>filename</b></a></dd>

<dd><a href="zlib.htm#M13" name="L2207"><b>os</b></a></dd>

<dd><a href="zlib.htm#M14" name="L2208"><b>size</b></a></dd>

<dd><a href="zlib.htm#M15" name="L2209"><b>time</b></a></dd>

<dd><a href="zlib.htm#M16" name="L2210"><b>type</b></a></dd>
</dl>
</dd>

<dd><a href="zlib.htm#M17" name="L2211"><b>zlib gzip</b>
<i>string</i> ?<b>-level</b> <i>level</i>? ?<b>-header</b>
<i>dict</i>?</a> 

<dl class="compression subcommands">
<dd><a href="zlib.htm#M18" name="L2212"><b>comment</b></a></dd>

<dd><a href="zlib.htm#M19" name="L2213"><b>crc</b></a></dd>

<dd><a href="zlib.htm#M20" name="L2214"><b>filename</b></a></dd>

<dd><a href="zlib.htm#M21" name="L2215"><b>os</b></a></dd>

<dd><a href="zlib.htm#M22" name="L2216"><b>time</b></a></dd>

<dd><a href="zlib.htm#M23" name="L2217"><b>type</b></a></dd>
</dl>
</dd>

<dd><a href="zlib.htm#M24" name="L2218"><b>zlib inflate</b>
<i>string</i> ?<i>bufferSize</i>?</a></dd>
</dl>
</dd>

<dd><a href="zlib.htm#M25" name="L2219">CHANNEL SUBCOMMAND</a> 

<dl class="channel subcommand">
<dd><a href="zlib.htm#M26" name="L2220"><b>zlib push</b> <i>mode
channel</i> ?<i>options ...</i>?</a> 

<dl class="channel subcommand">
<dd><a href="zlib.htm#M27" name="L2221"><b>compress</b></a></dd>

<dd><a href="zlib.htm#M28" name="L2222"><b>decompress</b></a></dd>

<dd><a href="zlib.htm#M29" name="L2223"><b>deflate</b></a></dd>

<dd><a href="zlib.htm#M30" name="L2224"><b>gunzip</b></a></dd>

<dd><a href="zlib.htm#M31" name="L2225"><b>gzip</b></a></dd>

<dd><a href="zlib.htm#M32" name="L2226"><b>inflate</b></a></dd>
</dl>

<dl class="channel subcommand">
<dd><a href="zlib.htm#M33" name="L2227"><b>-dictionary</b>
<i>binData</i></a></dd>

<dd><a href="zlib.htm#M34" name="L2228"><b>-header</b>
<i>dictionary</i></a></dd>

<dd><a href="zlib.htm#M35" name="L2229"><b>-level</b>
<i>compressionLevel</i></a></dd>

<dd><a href="zlib.htm#M36" name="L2230"><b>-limit</b>
<i>readaheadLimit</i></a></dd>
</dl>

<dl class="channel subcommand">
<dd><a href="zlib.htm#M37" name="L2231"><b>-checksum</b>
<i>checksum</i></a></dd>

<dd><a href="zlib.htm#M38" name="L2232"><b>-dictionary</b>
<i>binData</i></a></dd>

<dd><a href="zlib.htm#M39" name="L2233"><b>-flush</b>
<i>type</i></a></dd>

<dd><a href="zlib.htm#M40" name="L2234"><b>-header</b>
<i>dictionary</i></a></dd>

<dd><a href="zlib.htm#M41" name="L2235"><b>-limit</b>
<i>readaheadLimit</i></a></dd>
</dl>
</dd>
</dl>
</dd>

<dd><a href="zlib.htm#M42" name="L2236">STREAMING SUBCOMMAND</a> 

<dl class="streaming subcommand">
<dd><a href="zlib.htm#M43" name="L2237"><b>zlib stream</b>
<i>mode</i> ?<i>options</i>?</a> 

<dl class="streaming subcommand">
<dd><a href="zlib.htm#M44" name="L2238"><b>zlib stream compress</b>
?<b>-dictionary</b> <i>bindata</i>? ?<b>-level</b>
<i>level</i>?</a></dd>

<dd><a href="zlib.htm#M45" name="L2239"><b>zlib stream
decompress</b> ?<b>-dictionary</b> <i>bindata</i>?</a></dd>

<dd><a href="zlib.htm#M46" name="L2240"><b>zlib stream deflate</b>
?<b>-dictionary</b> <i>bindata</i>? ?<b>-level</b>
<i>level</i>?</a></dd>

<dd><a href="zlib.htm#M47" name="L2241"><b>zlib stream
gunzip</b></a></dd>

<dd><a href="zlib.htm#M48" name="L2242"><b>zlib stream gzip</b>
?<b>-header</b> <i>header</i>? ?<b>-level</b>
<i>level</i>?</a></dd>

<dd><a href="zlib.htm#M49" name="L2243"><b>zlib stream inflate</b>
?<b>-dictionary</b> <i>bindata</i>?</a></dd>
</dl>
</dd>
</dl>
</dd>

<dd><a href="zlib.htm#M50" name="L2244">CHECKSUMMING
SUBCOMMANDS</a> 

<dl class="checksumming subcommands">
<dd><a href="zlib.htm#M51" name="L2245"><b>zlib adler32</b>
<i>string</i> ?<i>initValue</i>?</a></dd>

<dd><a href="zlib.htm#M52" name="L2246"><b>zlib crc32</b>
<i>string</i> ?<i>initValue</i>?</a></dd>
</dl>
</dd>

<dd><a href="zlib.htm#M53" name="L2247">STREAMING INSTANCE
COMMAND</a> 

<dl class="streaming instance command">
<dd><a href="zlib.htm#M54" name="L2248"><i>stream</i> <b>add</b>
?<i>option...</i>? <i>data</i></a></dd>

<dd><a href="zlib.htm#M55" name="L2249"><i>stream</i>
<b>checksum</b></a></dd>

<dd><a href="zlib.htm#M56" name="L2250"><i>stream</i>
<b>close</b></a></dd>

<dd><a href="zlib.htm#M57" name="L2251"><i>stream</i>
<b>eof</b></a></dd>

<dd><a href="zlib.htm#M58" name="L2252"><i>stream</i>
<b>finalize</b></a></dd>

<dd><a href="zlib.htm#M59" name="L2253"><i>stream</i>
<b>flush</b></a></dd>

<dd><a href="zlib.htm#M60" name="L2254"><i>stream</i>
<b>fullflush</b></a></dd>

<dd><a href="zlib.htm#M61" name="L2255"><i>stream</i> <b>get</b>
?<i>count</i>?</a></dd>

<dd><a href="zlib.htm#M62" name="L2256"><i>stream</i> <b>put</b>
?<i>option...</i>? <i>data</i></a> 

<dl class="streaming instance command">
<dd><a href="zlib.htm#M63" name="L2257"><b>-dictionary</b>
<i>binData</i></a></dd>

<dd><a href="zlib.htm#M64" name="L2258"><b>-finalize</b></a></dd>

<dd><a href="zlib.htm#M65" name="L2259"><b>-flush</b></a></dd>

<dd><a href="zlib.htm#M66" name="L2260"><b>-fullflush</b></a></dd>
</dl>
</dd>

<dd><a href="zlib.htm#M67" name="L2261"><i>stream</i>
<b>reset</b></a></dd>
</dl>
</dd>

<dd><a href="zlib.htm#M68" name="L2262">EXAMPLES</a></dd>

<dd><a href="zlib.htm#M69" name="L2263">SEE ALSO</a></dd>

<dd><a href="zlib.htm#M70" name="L2264">KEYWORDS</a></dd>
</dl>

<h3><a name="M2">NAME</a></h3>

zlib - compression and decompression operations 

<h3><a name="M3">SYNOPSIS</a></h3>

<b>zlib</b> <i>subcommand arg ...</i><br>
<h3><a name="M4">DESCRIPTION</a></h3>

The <b>zlib</b> command provides access to the compression and
check-summing facilities of the Zlib library by Jean-loup Gailly
and Mark Adler. It has the following subcommands. 

<h4><a name="M5">COMPRESSION SUBCOMMANDS</a></h4>

<dl class="compression subcommands">
<dt><a name="M6"><b>zlib compress</b> <i>string</i>
?<i>level</i>?</a></dt>

<dd>Returns the zlib-format compressed binary data of the binary
string in <i>string</i>. If present, <i>level</i> gives the
compression level to use (from 0, which is uncompressed, to 9,
maximally compressed).</dd>

<dt><a name="M7"><b>zlib decompress</b> <i>string</i>
?<i>bufferSize</i>?</a></dt>

<dd>Returns the uncompressed version of the raw compressed binary
data in <i>string</i>. If present, <i>bufferSize</i> is a hint as
to what size of buffer is to be used to receive the data.</dd>

<dt><a name="M8"><b>zlib deflate</b> <i>string</i>
?<i>level</i>?</a></dt>

<dd>Returns the raw compressed binary data of the binary string in
<i>string</i>. If present, <i>level</i> gives the compression level
to use (from 0, which is uncompressed, to 9, maximally
compressed).</dd>

<dt><a name="M9"><b>zlib gunzip</b> <i>string</i>
?<b>-headerVar</b> <i>varName</i>?</a></dt>

<dd>Return the uncompressed contents of binary string
<i>string</i>, which must have been in gzip format. If
<b>-headerVar</b> is given, store a dictionary describing the
contents of the gzip header in the variable called <i>varName</i>.
The keys of the dictionary that may be present are: 

<dl class="compression subcommands">
<dt><a name="M10"><b>comment</b></a></dt>

<dd>The comment field from the header, if present.</dd>

<dt><a name="M11"><b>crc</b></a></dt>

<dd>A boolean value describing whether a CRC of the header is
computed.</dd>

<dt><a name="M12"><b>filename</b></a></dt>

<dd>The filename field from the header, if present.</dd>

<dt><a name="M13"><b>os</b></a></dt>

<dd>The operating system type code field from the header (if not
the QW unknown value). See RFC 1952 for the meaning of these
codes.</dd>

<dt><a name="M14"><b>size</b></a></dt>

<dd>The size of the uncompressed data.</dd>

<dt><a name="M15"><b>time</b></a></dt>

<dd>The time field from the header if non-zero, expected to be time
that the file named by the <b><a href=
"../TclCmd/filename.htm">filename</a></b> field was modified.
Suitable for use with <b>clock format</b>.</dd>

<dt><a name="M16"><b>type</b></a></dt>

<dd>The type of the uncompressed data (<b><a href=
"../TclCmd/binary.htm">binary</a></b> or <b><a href=
"../TkCmd/text.htm">text</a></b>) if known.</dd>
</dl>
</dd>

<dt><a name="M17"><b>zlib gzip</b> <i>string</i> ?<b>-level</b>
<i>level</i>? ?<b>-header</b> <i>dict</i>?</a></dt>

<dd>Return the compressed contents of binary string <i>string</i>
in gzip format. If <b>-level</b> is given, <i>level</i> gives the
compression level to use (from 0, which is uncompressed, to 9,
maximally compressed). If <b>-header</b> is given, <i>dict</i> is a
dictionary containing values used for the gzip header. The
following keys may be defined: 

<dl class="compression subcommands">
<dt><a name="M18"><b>comment</b></a></dt>

<dd>Add the given comment to the header of the gzip-format
data.</dd>

<dt><a name="M19"><b>crc</b></a></dt>

<dd>A boolean saying whether to compute a CRC of the header. Note
that if the data is to be interchanged with the <b>gzip</b>
program, a header CRC should <i>not</i> be computed.</dd>

<dt><a name="M20"><b>filename</b></a></dt>

<dd>The name of the file that the data to be compressed came
from.</dd>

<dt><a name="M21"><b>os</b></a></dt>

<dd>The operating system type code, which should be one of the
values described in RFC 1952.</dd>

<dt><a name="M22"><b>time</b></a></dt>

<dd>The time that the file named in the <b><a href=
"../TclCmd/filename.htm">filename</a></b> key was last modified.
This will be in the same as is returned by <b>clock seconds</b> or
<b><a href="../TclCmd/file.htm">file mtime</a></b>.</dd>

<dt><a name="M23"><b>type</b></a></dt>

<dd>The type of the data being compressed, being <b><a href=
"../TclCmd/binary.htm">binary</a></b> or <b><a href=
"../TkCmd/text.htm">text</a></b>.</dd>
</dl>
</dd>

<dt><a name="M24"><b>zlib inflate</b> <i>string</i>
?<i>bufferSize</i>?</a></dt>

<dd>Returns the uncompressed version of the raw compressed binary
data in <i>string</i>. If present, <i>bufferSize</i> is a hint as
to what size of buffer is to be used to receive the data.</dd>
</dl>

<h4><a name="M25">CHANNEL SUBCOMMAND</a></h4>

<dl class="channel subcommand">
<dt><a name="M26"><b>zlib push</b> <i>mode channel</i> ?<i>options
...</i>?</a></dt>

<dd>Pushes a compressing or decompressing transformation onto the
channel <i>channel</i>. The transformation can be removed again
with <b>chan pop</b>. The <i>mode</i> argument determines what type
of transformation is pushed; the following are supported: 

<dl class="channel subcommand">
<dt><a name="M27"><b>compress</b></a></dt>

<dd>The transformation will be a compressing transformation that
produces zlib-format data on <i>channel</i>, which must be
writable.</dd>

<dt><a name="M28"><b>decompress</b></a></dt>

<dd>The transformation will be a decompressing transformation that
reads zlib-format data from <i>channel</i>, which must be
readable.</dd>

<dt><a name="M29"><b>deflate</b></a></dt>

<dd>The transformation will be a compressing transformation that
produces raw compressed data on <i>channel</i>, which must be
writable.</dd>

<dt><a name="M30"><b>gunzip</b></a></dt>

<dd>The transformation will be a decompressing transformation that
reads gzip-format data from <i>channel</i>, which must be
readable.</dd>

<dt><a name="M31"><b>gzip</b></a></dt>

<dd>The transformation will be a compressing transformation that
produces gzip-format data on <i>channel</i>, which must be
writable.</dd>

<dt><a name="M32"><b>inflate</b></a></dt>

<dd>The transformation will be a decompressing transformation that
reads raw compressed data from <i>channel</i>, which must be
readable.</dd>
</dl>

<dl>
<dd>
<p>The following options may be set when creating a transformation
via the &ldquo;<i>options ...</i>&rdquo; to the <b>zlib push</b>
command:</p>

<dl class="channel subcommand">
<dt><a name="M33"><b>-dictionary</b> <i>binData</i></a></dt>

<dd>Sets the compression dictionary to use when working with
compressing or decompressing the data to be <i>binData</i>. Not
valid for transformations that work with gzip-format data.</dd>

<dt><a name="M34"><b>-header</b> <i>dictionary</i></a></dt>

<dd>Passes a description of the gzip header to create, in the same
format that <b>zlib gzip</b> understands.</dd>

<dt><a name="M35"><b>-level</b> <i>compressionLevel</i></a></dt>

<dd>How hard to compress the data. Must be an integer from 0
(uncompressed) to 9 (maximally compressed).</dd>

<dt><a name="M36"><b>-limit</b> <i>readaheadLimit</i></a></dt>

<dd>The maximum number of bytes ahead to read when decompressing.
This defaults to 1, which ensures that data is always decompressed
correctly, but may be increased to improve performance. This is
more useful when the channel is non-blocking.</dd>
</dl>

<p>Both compressing and decompressing channel transformations add
extra configuration options that may be accessed through <b>chan
configure</b>. The options are:</p>

<dl class="channel subcommand">
<dt><a name="M37"><b>-checksum</b> <i>checksum</i></a></dt>

<dd>This read-only option gets the current checksum for the
uncompressed data that the compression engine has seen so far. It
is valid for both compressing and decompressing transforms, but not
for the raw inflate and deflate formats. The compression algorithm
depends on what format is being produced or consumed.</dd>

<dt><a name="M38"><b>-dictionary</b> <i>binData</i></a></dt>

<dd>This read-write options gets or sets the compression dictionary
to use when working with compressing or decompressing the data to
be <i>binData</i>. It is not valid for transformations that work
with gzip-format data, and should not normally be set on
compressing transformations other than at the point where the
transformation is stacked.</dd>

<dt><a name="M39"><b>-flush</b> <i>type</i></a></dt>

<dd>This write-only operation flushes the current state of the
compressor to the underlying channel. It is only valid for
compressing transformations. The <i>type</i> must be either
<b>sync</b> or <b>full</b> for a normal flush or an expensive flush
respectively. Flushing degrades the compression ratio, but makes it
easier for a decompressor to recover more of the file in the case
of data corruption.</dd>

<dt><a name="M40"><b>-header</b> <i>dictionary</i></a></dt>

<dd>This read-only option, only valid for decompressing transforms
that are processing gzip-format data, returns the dictionary
describing the header read off the data stream.</dd>

<dt><a name="M41"><b>-limit</b> <i>readaheadLimit</i></a></dt>

<dd>This read-write option is used by decompressing channels to
control the maximum number of bytes ahead to read from the
underlying data source. This defaults to 1, which ensures that data
is always decompressed correctly, but may be increased to improve
performance. This is more useful when the channel is
non-blocking.</dd>
</dl>
</dd>
</dl>
</dd>
</dl>

<h4><a name="M42">STREAMING SUBCOMMAND</a></h4>

<dl class="streaming subcommand">
<dt><a name="M43"><b>zlib stream</b> <i>mode</i>
?<i>options</i>?</a></dt>

<dd>Creates a streaming compression or decompression command based
on the <i>mode</i>, and return the name of the command. For a
description of how that command works, see <b>STREAMING INSTANCE
COMMAND</b> below. The following modes and <i>options</i> are
supported: 

<dl class="streaming subcommand">
<dt><a name="M44"><b>zlib stream compress</b> ?<b>-dictionary</b>
<i>bindata</i>? ?<b>-level</b> <i>level</i>?</a></dt>

<dd>The stream will be a compressing stream that produces
zlib-format output, using compression level <i>level</i> (if
specified) which will be an integer from 0 to 9, and the
compression dictionary <i>bindata</i> (if specified).</dd>

<dt><a name="M45"><b>zlib stream decompress</b> ?<b>-dictionary</b>
<i>bindata</i>?</a></dt>

<dd>The stream will be a decompressing stream that takes
zlib-format input and produces uncompressed output. If
<i>bindata</i> is supplied, it is a compression dictionary to use
if required.</dd>

<dt><a name="M46"><b>zlib stream deflate</b> ?<b>-dictionary</b>
<i>bindata</i>? ?<b>-level</b> <i>level</i>?</a></dt>

<dd>The stream will be a compressing stream that produces raw
output, using compression level <i>level</i> (if specified) which
will be an integer from 0 to 9, and the compression dictionary
<i>bindata</i> (if specified). Note that the raw compressed data
includes no metadata about what compression dictionary was used, if
any; that is a feature of the zlib-format data.</dd>

<dt><a name="M47"><b>zlib stream gunzip</b></a></dt>

<dd>The stream will be a decompressing stream that takes
gzip-format input and produces uncompressed output.</dd>

<dt><a name="M48"><b>zlib stream gzip</b> ?<b>-header</b>
<i>header</i>? ?<b>-level</b> <i>level</i>?</a></dt>

<dd>The stream will be a compressing stream that produces
gzip-format output, using compression level <i>level</i> (if
specified) which will be an integer from 0 to 9, and the header
descriptor dictionary <i>header</i> (if specified; for keys see
<b>zlib gzip</b>).</dd>

<dt><a name="M49"><b>zlib stream inflate</b> ?<b>-dictionary</b>
<i>bindata</i>?</a></dt>

<dd>The stream will be a decompressing stream that takes raw
compressed input and produces uncompressed output. If
<i>bindata</i> is supplied, it is a compression dictionary to use.
Note that there are no checks in place to determine whether the
compression dictionary is correct.</dd>
</dl>
</dd>
</dl>

<h4><a name="M50">CHECKSUMMING SUBCOMMANDS</a></h4>

<dl class="checksumming subcommands">
<dt><a name="M51"><b>zlib adler32</b> <i>string</i>
?<i>initValue</i>?</a></dt>

<dd>Compute a checksum of binary string <i>string</i> using the
Adler-32 algorithm. If given, <i>initValue</i> is used to
initialize the checksum engine.</dd>

<dt><a name="M52"><b>zlib crc32</b> <i>string</i>
?<i>initValue</i>?</a></dt>

<dd>Compute a checksum of binary string <i>string</i> using the
CRC-32 algorithm. If given, <i>initValue</i> is used to initialize
the checksum engine.</dd>
</dl>

<h3><a name="M53">STREAMING INSTANCE COMMAND</a></h3>

Streaming compression instance commands are produced by the <b>zlib
stream</b> command. They are used by calling their <b>put</b>
subcommand one or more times to load data in, and their <b>get</b>
subcommand one or more times to extract the transformed data. 

<p>The full set of subcommands supported by a streaming instance
command, <i>stream</i>, is as follows:</p>

<dl class="streaming instance command">
<dt><a name="M54"><i>stream</i> <b>add</b> ?<i>option...</i>?
<i>data</i></a></dt>

<dd>A short-cut for &ldquo;<i>stream</i> <b>put</b>
?<i>option...</i>? <i>data</i>&rdquo; followed by
&ldquo;<i>stream</i> <b>get</b>&rdquo;.</dd>

<dt><a name="M55"><i>stream</i> <b>checksum</b></a></dt>

<dd>Returns the checksum of the uncompressed data seen so far by
this stream.</dd>

<dt><a name="M56"><i>stream</i> <b>close</b></a></dt>

<dd>Deletes this stream and frees up all resources associated with
it.</dd>

<dt><a name="M57"><i>stream</i> <b>eof</b></a></dt>

<dd>Returns a boolean indicating whether the end of the stream (as
determined by the compressed data itself) has been reached. Not all
formats support detection of the end of the stream.</dd>

<dt><a name="M58"><i>stream</i> <b>finalize</b></a></dt>

<dd>A short-cut for &ldquo;<i>stream</i> <b>put -finalize
{}</b>&rdquo;.</dd>

<dt><a name="M59"><i>stream</i> <b>flush</b></a></dt>

<dd>A short-cut for &ldquo;<i>stream</i> <b>put -flush
{}</b>&rdquo;.</dd>

<dt><a name="M60"><i>stream</i> <b>fullflush</b></a></dt>

<dd>A short-cut for &ldquo;<i>stream</i> <b>put -fullflush
{}</b>&rdquo;.</dd>

<dt><a name="M61"><i>stream</i> <b>get</b> ?<i>count</i>?</a></dt>

<dd>Return up to <i>count</i> bytes from <i>stream</i>'s internal
buffers with the transformation applied. If <i>count</i> is
omitted, the entire contents of the buffers are returned.
<i>stream</i> <b>header</b> Return the gzip header description
dictionary extracted from the stream. Only supported for streams
created with their <i>mode</i> parameter set to <b>gunzip</b>.</dd>

<dt><a name="M62"><i>stream</i> <b>put</b> ?<i>option...</i>?
<i>data</i></a></dt>

<dd>Append the contents of the binary string <i>data</i> to
<i>stream</i>'s internal buffers while applying the transformation.
The following <i>option</i>s are supported (or an unambiguous
prefix of them), which are used to modify the way in which the
transformation is applied: 

<dl class="streaming instance command">
<dt><a name="M63"><b>-dictionary</b> <i>binData</i></a></dt>

<dd>Sets the compression dictionary to use when working with
compressing or decompressing the data to be <i>binData</i>.</dd>

<dt><a name="M64"><b>-finalize</b></a></dt>

<dd>Mark the stream as finished, ensuring that all bytes have been
wholly compressed or decompressed. For gzip streams, this also
ensures that the footer is written to the stream. The stream will
need to be reset before having more data written to it after this,
though data can still be read out of the stream with the <b>get</b>
subcommand. 

<p>This option is mutually exclusive with the <b>-flush</b> and
<b>-fullflush</b> options.</p>
</dd>

<dt><a name="M65"><b>-flush</b></a></dt>

<dd>Ensure that a decompressor consuming the bytes that the current
(compressing) stream is producing will be able to produce all the
bytes that have been compressed so far, at some performance
penalty. 

<p>This option is mutually exclusive with the <b>-finalize</b> and
<b>-fullflush</b> options.</p>
</dd>

<dt><a name="M66"><b>-fullflush</b></a></dt>

<dd>Ensure that not only can a decompressor handle all the bytes
produced so far (as with <b>-flush</b> above) but also that it can
restart from this point if it detects that the stream is partially
corrupt. This incurs a substantial performance penalty. 

<p>This option is mutually exclusive with the <b>-finalize</b> and
<b>-flush</b> options.</p>
</dd>
</dl>
</dd>

<dt><a name="M67"><i>stream</i> <b>reset</b></a></dt>

<dd>Puts any stream, including those that have been finalized or
that have reached eof, back into a state where it can process more
data. Throws away all internally buffered data.</dd>
</dl>

<h3><a name="M68">EXAMPLES</a></h3>

To compress a Tcl string, it should be first converted to a
particular charset encoding since the <b>zlib</b> command always
operates on binary strings. 

<pre>
set binData [encoding convertto utf-8 $string]
set compData [<b>zlib compress</b> $binData]
</pre>

<p>When converting back, it is also important to reverse the
charset encoding:</p>

<pre>
set binData [<b>zlib decompress</b> $compData]
set string [encoding convertfrom utf-8 $binData]
</pre>

<p>The compression operation from above can also be done with
streams, which is especially helpful when you want to accumulate
the data by stages:</p>

<pre>
set strm [<b>zlib stream</b> compress]
$<i>strm</i> <b>put</b> [encoding convertto utf-8 $string]
# ...
$<i>strm</i> <b>finalize</b>
set compData [$<i>strm</i> <b>get</b>]
$<i>strm</i> <b><a href="../TclCmd/close.htm">close</a></b>
</pre>

<h3><a name="M69">SEE ALSO</a></h3>

<b><a href="../TclCmd/binary.htm">binary</a></b>, <b><a href=
"../TclCmd/chan.htm">chan</a></b>, <b><a href=
"../TclCmd/encoding.htm">encoding</a></b>, <b><a href=
"../TclLib/TclZlib.htm">Tcl_ZlibDeflate</a></b>, <b>RFC1950 -
RFC1952</b> 

<h3><a name="M70">KEYWORDS</a></h3>

<a href="../Keywords/C.htm#compress">compress</a>, <a href=
"../Keywords/D.htm#decompress">decompress</a>, <a href=
"../Keywords/D.htm#deflate">deflate</a>, <a href=
"../Keywords/G.htm#gzip">gzip</a>, <a href=
"../Keywords/I.htm#inflate">inflate</a>, <a href=
"../Keywords/Z.htm#zlib">zlib</a> 

<div class="copy">Copyright &copy; 1995-1997 Roger E. Critchlow Jr.
Copyright &copy; 2008-2012 Donal K. Fellows</div>
</body>
</html>

